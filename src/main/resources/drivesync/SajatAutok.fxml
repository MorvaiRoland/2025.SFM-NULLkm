<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="drivesync.SajatAutokController"
            prefWidth="900" prefHeight="600" style="-fx-background-color: #f4f4f4;">

    <top>
        <Label fx:id="welcomeLabel" text="Itt a saját autóid listája:" BorderPane.alignment="CENTER"
               style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333;">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>
        </Label>
    </top>

    <center>
        <VBox spacing="20">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <ScrollPane fx:id="carsScrollPane" fitToHeight="false" fitToWidth="true"
                        hbarPolicy="AS_NEEDED" vbarPolicy="NEVER" style="-fx-background: transparent;">
                <content>
                    <FlowPane fx:id="carsList" hgap="20" vgap="20">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                    </FlowPane>
                </content>
            </ScrollPane>

            <TitledPane fx:id="addCarTitledPane" text="➕ Új autó hozzáadása" expanded="false"
                        style="-fx-font-weight: bold; -fx-font-size: 16px;">
                <content>
                    <VBox spacing="15" style="-fx-background-color: #ffffff; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                        <Label fx:id="formTitle" text="Új autó hozzáadása"
                               style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #222;"/>

                        <GridPane hgap="15" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints halignment="RIGHT"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <Label text="Rendszám:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <TextField fx:id="licenseField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Márka:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <TextField fx:id="brandField" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="Típus:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <TextField fx:id="typeField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <Label text="Évjárat:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <ChoiceBox fx:id="vintageField" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                            <Label text="Motor típusa:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                            <TextField fx:id="engineTypeField" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                            <Label text="Üzemanyag:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                            <ChoiceBox fx:id="fuelTypeField" GridPane.rowIndex="5" GridPane.columnIndex="1"/>

                            <Label text="Futásteljesítmény:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                            <TextField fx:id="kmField" GridPane.rowIndex="6" GridPane.columnIndex="1"/>

                            <Label text="Olaj mennyiség (ml):" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                            <TextField fx:id="oilField" GridPane.rowIndex="7" GridPane.columnIndex="1"/>

                            <Label text="Gumi méret:" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                            <TextField fx:id="tireSizeField" GridPane.rowIndex="8" GridPane.columnIndex="1"/>

                            <Label text="Szerviz dátuma:" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
                            <DatePicker fx:id="serviceDatePickerCar" GridPane.rowIndex="9" GridPane.columnIndex="1"/>

                            <Label text="Biztosítás:" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                            <DatePicker fx:id="insuranceDatePicker" GridPane.rowIndex="10" GridPane.columnIndex="1"/>
                        </GridPane>

                        <Button text="Mentés" onAction="#handleAddOrEditCar"
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
                    </VBox>
                </content>
            </TitledPane>

            <TitledPane fx:id="addServicePane" text="➕ Új szerviz hozzáadása" expanded="false"
                        style="-fx-font-weight: bold; -fx-font-size: 16px;">
                <content>
                    <VBox spacing="15" style="-fx-background-color: #ffffff; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>

                        <GridPane hgap="15" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints halignment="RIGHT"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <Label text="Szerviz típus:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <ChoiceBox fx:id="serviceTypeChoice" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Szerviz dátuma:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <DatePicker fx:id="serviceDatePicker" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="KM:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <TextField fx:id="serviceKmField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <Label text="Ár (Ft):" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <TextField fx:id="servicePriceField" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                            <Label text="Cserélt alkatrészek:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                            <TextField fx:id="replacedPartsField" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                        </GridPane>

                        <Button text="Szerviz mentése" onAction="#saveService"
                                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
                    </VBox>
                </content>
            </TitledPane>
            <TitledPane fx:id="carDetailsPane" text="Autó részletei" expanded="false"
                        style="-fx-font-weight: bold; -fx-font-size: 16px;">
                <content>
                    <VBox spacing="10" style="-fx-background-color: #ffffff; -fx-background-radius: 10;
                                  -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                        <Label fx:id="carDetailsLabel" text="Válassz egy autót a listából!"
                               style="-fx-font-size: 14px; -fx-text-fill: #333;"/>
                        <ListView fx:id="serviceListView" prefHeight="150"/>
                    </VBox>
                </content>
            </TitledPane>


        </VBox>
    </center>

    <bottom>
        <HBox spacing="15" alignment="CENTER">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <Button fx:id="scrollLeftBtn" text="⭠" onAction="#scrollLeft"
                    style="-fx-background-color: #EEEEEE; -fx-background-radius: 5; -fx-font-weight: bold;"/>
            <Button fx:id="scrollRightBtn" text="⭢" onAction="#scrollRight"
                    style="-fx-background-color: #EEEEEE; -fx-background-radius: 5; -fx-font-weight: bold;"/>
            <Button fx:id="generatePdfBtn" text="PDF generálása" onAction="#handleGeneratePdf"
                    style="-fx-background-color: #FF5722; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
        </HBox>
    </bottom>

</BorderPane>
